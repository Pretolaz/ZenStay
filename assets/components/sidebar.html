<aside class="sidebar">
  <h2 class="logo">ğŸ¡ ZenStay</h2>
  <nav>
    <ul>
      <li><a href="index.html">ğŸ“Š Painel</a></li>
      <li><a href="clientes.html">ğŸ‘¤ HÃ³spedes</a></li>
      <li><a href="anfitrioes.html">ğŸ§‘â€ğŸ’¼ AnfitriÃµes</a></li>
      <li class="has-submenu">
        <a href="#" class="submenu-toggle">ğŸ˜ï¸ ImÃ³veis <span class="arrow">â–¶</span></a>
        <ul class="submenu">
          <li><a href="imoveis.html#gerenciar">Gerenciar ImÃ³veis</a></li>
          <li><a href="imoveis.html#comodos">CÃ´modos</a></li>
          <li><a href="imoveis.html#inventario">InventÃ¡rio</a></li>
        </ul>
      </li>
      <li><a href="plataformas.html">ğŸŒ Plataformas</a></li>
      <li><a href="reservas.html">ğŸ“… Reservas</a></li>
      <li><a href="financeiro.html">ğŸ’° Financeiro</a></li>
      <li><a href="config.html">âš™ï¸ ConfiguraÃ§Ãµes</a></li>
    </ul>
  </nav>
</aside>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const submenuToggle = document.querySelector('.submenu-toggle');
    const submenu = document.querySelector('.submenu');
    const arrow = submenuToggle.querySelector('.arrow');

    // FunÃ§Ã£o para manter o submenu aberto se um item filho estiver ativo
    const checkActiveSubmenu = () => {
      const currentPath = window.location.pathname.split('/').pop();
      const currentHash = window.location.hash;
      const activeSubmenuLink = submenu.querySelector(`a[href="${currentPath}${currentHash}"]`);
      
      if (activeSubmenuLink) {
        submenu.style.display = 'block';
        arrow.textContent = 'â–¼'; // Vira para baixo
        activeSubmenuLink.classList.add('active');
        submenuToggle.classList.add('active'); // Marca o pai como ativo tambÃ©m
      } else if (currentPath === 'imoveis.html') {
        // Se estiver na pÃ¡gina de imÃ³veis, mas nenhum subitem estÃ¡ ativo, mostra o gerenciador por padrÃ£o
        // Isso pode ser ajustado para o comportamento desejado, por enquanto mantÃ©m o submenu fechado
      }
    };

    // Adiciona evento de clique para alternar o submenu
    if (submenuToggle) {
      submenuToggle.addEventListener('click', (e) => {
        e.preventDefault();
        if (submenu.style.display === 'block') {
          submenu.style.display = 'none';
          arrow.textContent = 'â–¶'; // Vira para a direita
        } else {
          submenu.style.display = 'block';
          arrow.textContent = 'â–¼'; // Vira para baixo
        }
      });
    }

    // Marca o link principal como ativo (se for a pÃ¡gina principal do submenu)
    const mainImoveisLink = document.querySelector('a[href="imoveis.html"]');
    if (mainImoveisLink && window.location.pathname.split('/').pop() === 'imoveis.html' && !window.location.hash) {
        mainImoveisLink.classList.add('active');
    }

    // Marca o item de menu lateral como ativo
    const path = window.location.pathname.split("/").pop();
    const hash = window.location.hash;
    document.querySelectorAll(".sidebar a").forEach(link => {
        const linkHref = link.getAttribute("href");
        if (linkHref === path + hash) {
            link.classList.add("active");
            // Se for um item de submenu, expande o pai
            if (link.closest('.submenu')) {
                const parentSubmenu = link.closest('.has-submenu');
                if (parentSubmenu) {
                    parentSubmenu.querySelector('.submenu').style.display = 'block';
                    parentSubmenu.querySelector('.arrow').textContent = 'â–¼';
                    parentSubmenu.querySelector('.submenu-toggle').classList.add('active');
                }
            }
        } else if (linkHref === path && !hash) { // Para o link pai sem hash
            link.classList.add("active");
        }
    });

    checkActiveSubmenu();
  });
</script>
